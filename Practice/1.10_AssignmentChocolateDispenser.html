<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignment | Chocolate Dispenser</title>
</head>

<body>
    <script>
      
        function addChocolates(chocolates, color, count) {
            if (count <= 0) return "Number cannot be zero/negative";

            let newChocolates = [];
            for (let i = 0; i < count; i++) {
                newChocolates.push(color);
            }

            chocolates.unshift(...newChocolates);
            return chocolates;
        }

        function removeChocolates(number, chocolates) {
            if (number <= 0) return "Number cannot be zero/negative";
            if (number > chocolates.length)
                return "Insufficient chocolates in the dispenser";

            return chocolates.splice(0, number); // remove from top
        }

        function dispenseChocolates(chocolates, number) {
            if (number <= 0) return "Number cannot be zero/negative";
            if (number > chocolates.length)
                return "Insufficient chocolates in the dispensers";

            return chocolates.splice(chocolates.length - number, number);
        }

        function dispenseChocolatesOfColor(chocolates, number, color) {
            let available = chocolates.filter(c => c === color).length;

            if (number > available)
                return "Insufficient chocolates in the dispensers";

            let removed = [];
            for (let i = chocolates.length - 1; i >= 0 && removed.length < number; i--) {
                if (chocolates[i] === color) {
                    removed.push(chocolates[i]);
                    chocolates.splice(i, 1);
                }
            }
            return removed;
        }

        function noOfChocolates(chocolates) {
            const order = ["green", "silver", "blue", "crimson", "purple", "red", "pink"];
            return order.map(color =>
                chocolates.filter(c => c === color).length
            );
        }

        function sortChocolateBasedOnCount(chocolates) {
            let freq = {};

            chocolates.forEach(c => {
                freq[c] = (freq[c] || 0) + 1;
            });

            return chocolates.sort((a, b) => freq[b] - freq[a]);
        }

        function changeChocolateColor(chocolates, number, color, finalColor) {
            if (color === finalColor)
                return "Can't replace the same chocolates";

            let changed = 0;
            for (let i = chocolates.length - 1; i >= 0 && changed < number; i--) {
                if (chocolates[i] === color) {
                    chocolates[i] = finalColor;
                    changed++;
                }
            }
            return chocolates;
        }

        function changeChocolateColorAllOfxCount(chocolates, color, finalColor) {
            let count = 0;

            for (let i = 0; i < chocolates.length; i++) {
                if (chocolates[i] === color) {
                    chocolates[i] = finalColor;
                    count++;
                }
            }
            return [count, chocolates];
        }


        function removeChocolateOfColor(chocolates, color) {
            for (let i = 0; i < chocolates.length; i++) {
                if (chocolates[i] === color) {
                    return chocolates.splice(i, 1);
                }
            }
            return [];
        }

        function dispenseRainbowChocolates(chocolates, number) {
            let freq = {};

            chocolates.forEach(c => {
                freq[c] = (freq[c] || 0) + 1;
            });

            let rainbow = 0;
            for (let color in freq) {
                rainbow += Math.floor(freq[color] / 3);
            }

            return Math.min(rainbow, number);
        }

    </script>
</body>

</html>